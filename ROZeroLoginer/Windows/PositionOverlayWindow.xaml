<Window x:Class="ROZeroLoginer.Windows.PositionOverlayWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Position Overlay"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Topmost="True"
        WindowState="Maximized"
        MouseMove="Window_MouseMove"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <!-- 半透明背景 -->
    <Grid>
        <Grid.Background>
            <SolidColorBrush Color="Black" Opacity="0.3"/>
        </Grid.Background>

        <!-- 座標顯示和提示 -->
        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
            <!-- 提示框 -->
            <Border Background="#DD000000" CornerRadius="10" Padding="30" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="點擊捕獲模式" FontSize="28" FontWeight="Bold"
                               Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,15"/>

                    <TextBlock Text="請將滑鼠移動到遊戲視窗的「同意」按鈕上"
                               FontSize="16" Foreground="#FFCCCCCC"
                               HorizontalAlignment="Center" Margin="0,0,0,5"/>

                    <TextBlock Text="然後點擊滑鼠左鍵來捕獲位置"
                               FontSize="16" Foreground="#FFCCCCCC"
                               HorizontalAlignment="Center" Margin="0,0,0,20"/>

                    <!-- 當前座標顯示 -->
                    <Border Background="#FF1E1E1E" CornerRadius="8" Padding="20,15" Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="當前滑鼠位置 (螢幕座標):"
                                       FontSize="14" Foreground="#FF888888"
                                       HorizontalAlignment="Center" Margin="0,0,0,8"/>
                            <TextBlock Name="CurrentPositionTextBlock"
                                       Text="X: 0, Y: 0"
                                       FontSize="24" FontWeight="Bold"
                                       Foreground="#FF00D4FF"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <!-- 捕獲的座標顯示 (初始隱藏) -->
                    <Border Name="CapturedPositionBorder"
                            Background="#FF1E4D1E" CornerRadius="8" Padding="20,15"
                            Visibility="Collapsed">
                        <StackPanel>
                            <TextBlock Text="✓ 已捕獲位置 (視窗客戶區座標):"
                                       FontSize="14" Foreground="#FF88FF88"
                                       HorizontalAlignment="Center" Margin="0,0,0,8"/>
                            <TextBlock Name="CapturedPositionTextBlock"
                                       Text="X: 0, Y: 0"
                                       FontSize="24" FontWeight="Bold"
                                       Foreground="#FF00FF00"
                                       HorizontalAlignment="Center"/>
                            <TextBlock Name="WindowInfoTextBlock"
                                       Text="視窗: 未知"
                                       FontSize="12" Foreground="#FF88FF88"
                                       HorizontalAlignment="Center" Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>

                    <TextBlock Text="按 Esc 鍵取消"
                               FontSize="14" Foreground="#FF888888"
                               HorizontalAlignment="Center" Margin="0,15,0,0"/>
                </StackPanel>
            </Border>

            <!-- 滑鼠指標位置的十字線 -->
            <Canvas Name="CrosshairCanvas" Width="0" Height="0" IsHitTestVisible="False">
                <!-- 這個會在代碼中動態更新位置 -->
            </Canvas>
        </StackPanel>

        <!-- 十字線 (跟隨滑鼠) -->
        <Canvas IsHitTestVisible="False">
            <!-- 垂直線 -->
            <Line Name="VerticalLine" X1="0" Y1="0" X2="0" Y2="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Window}}"
                  Stroke="#4400FF00" StrokeThickness="1"/>
            <!-- 水平線 -->
            <Line Name="HorizontalLine" X1="0" Y1="0" X2="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}}" Y2="0"
                  Stroke="#4400FF00" StrokeThickness="1"/>
        </Canvas>
    </Grid>
</Window>
