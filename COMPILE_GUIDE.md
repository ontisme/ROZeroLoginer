# 編譯指南

## ✅ 已完成的修復

所有代碼修改已完成!專案文件也已更新。

## 📁 修改的文件

### 新增文件
1. ✅ `ROZeroLoginer\Services\WindowReadinessService.cs` - 視窗就緒檢測服務
2. ✅ `SOLUTION.md` - 完整解決方案文檔
3. ✅ `IMPLEMENTATION_SUMMARY.md` - 實施總結文檔
4. ✅ `build.bat` - 編譯腳本
5. ✅ `COMPILE_GUIDE.md` - 本文件

### 修改文件
1. ✅ `ROZeroLoginer\Models\AppSettings.cs` - 新增延遲配置
2. ✅ `ROZeroLoginer\Services\InputService.cs` - 完整重構
3. ✅ `ROZeroLoginer\ROZeroLoginer.csproj` - 添加 WindowReadinessService.cs

## 🔧 編譯方法

### 方法1: 使用提供的批次檔
```batch
cd C:\Codes\source\repos\ROZeroLoginer
build.bat
```

### 方法2: 在 Visual Studio 中編譯
1. 打開 Visual Studio 2022
2. 開啟 `ROZeroLoginer.sln`
3. 按 Ctrl+Shift+B 或選擇「建置」→「重建方案」

### 方法3: 使用命令列 MSBuild
```batch
cd C:\Codes\source\repos\ROZeroLoginer
"C:\Program Files\Microsoft Visual Studio\2022\Enterprise\MSBuild\Current\Bin\MSBuild.exe" ROZeroLoginer.sln /p:Configuration=Debug /p:Platform="Any CPU" /t:Rebuild
```

## ⚠️ 可能的編譯錯誤

### 錯誤: 找不到 WindowReadinessService
**原因**: 專案文件未包含新文件
**解決**: 已修復,專案文件已更新

### 錯誤: 找不到 MSBuild.exe
**解決**: 確認 Visual Studio 2022 Enterprise 已安裝,或修改路徑為你的 MSBuild.exe 位置

## 📊 編譯後檢查清單

編譯成功後,請檢查:
- [ ] 沒有編譯錯誤
- [ ] 沒有編譯警告(或警告數量合理)
- [ ] 生成的 .exe 文件存在於 `bin\Debug\` 或 `bin\Release\`

## 🧪 測試計劃

編譯成功後,建議按以下順序測試:

### 1. 基本功能測試
- [ ] 程式能正常啟動
- [ ] 主視窗正常顯示
- [ ] 設定頁面能打開

### 2. 單個帳號登入測試
- [ ] 選擇一個帳號
- [ ] 點擊登入
- [ ] 觀察是否能正常登入遊戲
- [ ] 檢查日誌中的 NumLock 狀態記錄
- [ ] 檢查日誌中的視窗就緒檢測記錄

### 3. 自動選擇邏輯測試
**測試案例A: 勾選自動選擇**
- [ ] 勾選「自動選擇伺服器」
- [ ] 勾選「自動選擇角色」
- [ ] 登入
- [ ] **預期結果**: 自動選擇並進入遊戲

**測試案例B: 不勾選自動選擇**
- [ ] 取消勾選「自動選擇伺服器」
- [ ] 取消勾選「自動選擇角色」
- [ ] 登入
- [ ] **預期結果**: 停留在選擇畫面,不自動進入遊戲

### 4. 批次啟動測試
**測試案例C: 2-3個帳號**
- [ ] 選擇2-3個帳號
- [ ] 點擊「批次啟動」
- [ ] 觀察每個帳號是否能正常登入
- [ ] 檢查日誌確認視窗就緒檢測正常運作

**測試案例D: 5-10個帳號**
- [ ] 選擇5-10個帳號
- [ ] 點擊「批次啟動」
- [ ] 觀察穩定性
- [ ] 檢查是否有視窗無響應問題

### 5. NumLock 測試
- [ ] 關閉 NumLock
- [ ] 嘗試登入
- [ ] 檢查日誌確認自動啟用 NumLock
- [ ] 觀察是否仍然正常工作

## 📝 測試記錄

請記錄測試結果:

```
測試日期: __________
測試人員: __________

編譯結果: [ ] 成功 [ ] 失敗
錯誤/警告數量: __________

功能測試結果:
1. 基本功能: [ ] 通過 [ ] 失敗 - 備註: __________
2. 單個登入: [ ] 通過 [ ] 失敗 - 備註: __________
3. 自動選擇: [ ] 通過 [ ] 失敗 - 備註: __________
4. 批次啟動: [ ] 通過 [ ] 失敗 - 備註: __________
5. NumLock: [ ] 通過 [ ] 失敗 - 備註: __________

問題記錄:
__________________________________________
__________________________________________
__________________________________________

整體評估: [ ] 可發布 [ ] 需要修復
```

## 🚀 發布前檢查

如果所有測試通過,發布前請:
- [ ] 使用 Release 配置重新編譯
- [ ] 確認版本號已更新
- [ ] 更新 CHANGELOG 或 Release Notes
- [ ] 打包所有必要文件
- [ ] 準備更新公告

## 📞 問題回報

如果遇到問題:
1. 檢查日誌文件 (`logs/` 目錄)
2. 記錄詳細的錯誤信息
3. 提供測試步驟
4. 附上相關日誌片段

## 🎉 成功標準

所有測試通過,且:
- ✅ 視窗無響應問題已解決
- ✅ 未勾選自動選擇時停留在選擇畫面
- ✅ 批次啟動穩定可靠
- ✅ NumLock 關閉也能正常工作
- ✅ 延遲設定有效可控

---

**祝編譯和測試順利!** 🎊
